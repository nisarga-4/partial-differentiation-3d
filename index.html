<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Partial Differentiation Visualization</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <style>
    body {
        font-family: Arial;
        text-align: center;
        background: radial-gradient(circle at top, #0a1a2f, #000000);
        color: white;
    }
    input {
        padding: 6px;
        margin: 5px;
        width: 80px;
        background: #111;
        color: white;
        border: 1px solid #444;
    }
    button {
        padding: 8px 15px;
        cursor: pointer;
        background: #1e90ff;
        color: white;
        border: none;
        border-radius: 4px;
    }
    h2 {
        color: #9fd3ff;
    }
    #plot {
        width: 95%;
        height: 600px;
        margin: auto;
    }
</style>
</head>
<body>

<h2>3D Visualization of Partial Differentiation</h2>

<label>X value:</label>
<input type="number" id="xVal" value="1">

<label>Y value:</label>
<input type="number" id="yVal" value="1">

<button onclick="updatePlot()">Visualize</button>

<div id="plot"></div>

<script>
function updatePlot() {
    let x0 = parseFloat(document.getElementById("xVal").value);
    let y0 = parseFloat(document.getElementById("yVal").value);

    let x = [];
    let y = [];
    let z = [];

    for (let i = -5; i <= 5; i += 0.2) {
        x.push(i);
        y.push(i);
    }

    for (let i = 0; i < x.length; i++) {
        let row = [];
        for (let j = 0; j < y.length; j++) {
            row.push(x[i]*x[i] + y[j]*y[j]);
        }
        z.push(row);
    }

    let surface = {
        x: x,
        y: y,
        z: z,
        type: 'surface',
        opacity: 0.85
    };

    // Point on surface
    let point = {
    x: [x0],
    y: [y0],
    z: [x0*x0 + y0*y0],
    mode: 'markers',
    type: 'scatter3d',
    marker: {
        size: 7,
        color: 'red'
    },
    text: [
        `x = ${x0}<br>
         y = ${y0}<br>
         f(x,y) = ${x0*x0 + y0*y0}<br>
         ∂f/∂x = ${2*x0}<br>
         ∂f/∂y = ${2*y0}`
    ],
    hoverinfo: 'text',
    name: 'Evaluation Point'
};

    // ∂f/∂x (Glowing Blue)
let dfdx = {
    x: [x0, x0 + 1],
    y: [y0, y0],
    z: [x0*x0 + y0*y0, x0*x0 + y0*y0 + 2*x0],
    mode: 'lines+markers',
    type: 'scatter3d',
    line: {
        color: 'cyan',
        width: 10
    },
    marker: {
        size: 4,
        color: 'cyan'
    },
    name: '∂f/∂x'
};

// ∂f/∂y (Glowing Green)
let dfdy = {
    x: [x0, x0],
    y: [y0, y0 + 1],
    z: [x0*x0 + y0*y0, x0*x0 + y0*y0 + 2*y0],
    mode: 'lines+markers',
    type: 'scatter3d',
    line: {
        color: 'lime',
        width: 10
    },
    marker: {
        size: 4,
        color: 'lime'
    },
    name: '∂f/∂y'
};

    Plotly.newPlot('plot', [surface, point, dfdx, dfdy], {
    title: {
        text: 'f(x, y) = x² + y²',
        font: { color: 'white' }
    },
    paper_bgcolor: 'black',
    plot_bgcolor: 'black',
    scene: {
        bgcolor: 'black',
        xaxis: {
            title: 'X',
            color: 'white',
            gridcolor: '#333'
        },
        yaxis: {
            title: 'Y',
            color: 'white',
            gridcolor: '#333'
        },
        zaxis: {
            title: 'Z',
            color: 'white',
            gridcolor: '#333'
        }
    }
});
}

updatePlot();
</script>

</body>
</html>